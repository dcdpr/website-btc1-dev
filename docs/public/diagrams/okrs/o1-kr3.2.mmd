---
title: "Data Source Distinction - Blockchain vs. Sidecar vs. CAS/IPFS"
---

flowchart TB
    subgraph On_Chain[Bitcoin Blockchain â›“]
      OP32[OP_RETURN 32 bytes<br/>â€¢ Singleton: updateId<br/>â€¢ Map: mapHash<br/>â€¢ SMT: rootHash]
    end

    subgraph Off_Chain_Public["CAS / IPFS ðŸ“¦"]
      MAP["ðŸ—º Beacon Announcement Map (JSON)"]
      UPD["ðŸ§¾ btc1Update (JSON)"]
    end

    subgraph Off_Chain_Private[Sidecar Data ðŸ§³]
      PROOF["ðŸŒ² smtProof {id, nonce, (updateId), path}"]
      DOCS["ðŸ§¾ btc1Update (if not on CAS)"]
    end

    OP32 -. used by resolver to look up/verify .- MAP
    OP32 -. used to verify inclusion .- PROOF
    MAP -->|did â†’ updateId| UPD
    DOCS -->|hash = updateId| OP32
    UPD -->|SHA256+JCS=updateId| OP32
